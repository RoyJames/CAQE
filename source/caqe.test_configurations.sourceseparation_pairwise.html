

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>caqe.test_configurations.sourceseparation_pairwise module &mdash; CAQE 0.1a1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="CAQE 0.1a1 documentation" href="../index.html"/>
        <link rel="up" title="caqe.test_configurations package" href="caqe.test_configurations.html"/>
        <link rel="next" title="caqe package" href="caqe.html"/>
        <link rel="prev" title="caqe.test_configurations.sourceseparation_mushra module" href="caqe.test_configurations.sourceseparation_mushra.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> CAQE
          

          
          </a>

          
            
            
              <div class="version">
                0.1a1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Deployment</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="caqe.test_configurations.html">Testing Configurations</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="caqe.test_configurations.html#pre-defined-configurations">Pre-defined Configurations</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="caqe.test_configurations.base.html">Base configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="caqe.test_configurations.general_mushra.html">MUSHRA for overall quality evaluation</a></li>
<li class="toctree-l3"><a class="reference internal" href="caqe.test_configurations.general_pairwise.html">Pairwise for overall quality evaluation</a></li>
<li class="toctree-l3"><a class="reference internal" href="caqe.test_configurations.sourceseparation_mushra.html">MUSHRA for source separation quality evaluation</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Pairwise for source separation quality evaluation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuration-source">Configuration Source</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="caqe.html">CAQE Package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">CAQE</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="caqe.test_configurations.html">caqe.test_configurations package</a> &raquo;</li>
      
    <li>caqe.test_configurations.sourceseparation_pairwise module</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/source/caqe.test_configurations.sourceseparation_pairwise.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-caqe.test_configurations.sourceseparation_pairwise">
<span id="caqe-test-configurations-sourceseparation-pairwise-module"></span><h1>caqe.test_configurations.sourceseparation_pairwise module<a class="headerlink" href="#module-caqe.test_configurations.sourceseparation_pairwise" title="Permalink to this headline">¶</a></h1>
<p>A pairwise (e.g. A is better than B configuration for evaluating output quality of audio source
separation algorithms on 4 different quality scales:</p>
<ol class="arabic simple">
<li>Preservation of the Target Sound</li>
<li>Suppression of Other Sounds</li>
<li>Absence of Additional Artificial Noise</li>
<li>Lack of Distortions to the Target Sound</li>
</ol>
<dl class="function">
<dt id="caqe.test_configurations.sourceseparation_pairwise.insert_tests_and_conditions">
<code class="descclassname">caqe.test_configurations.sourceseparation_pairwise.</code><code class="descname">insert_tests_and_conditions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/caqe/test_configurations/sourceseparation_pairwise.html#insert_tests_and_conditions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#caqe.test_configurations.sourceseparation_pairwise.insert_tests_and_conditions" title="Permalink to this definition">¶</a></dt>
<dd><p>This is where you configure and define the listening test. If you need to change HTML content based on
the testing condition, you configure it here as well, overriding the default values in <cite>CONFIGURATION</cite>.
Running this doctest initializes the development database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>To call this you need the application context, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;FLASK_CONF&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;DEV&#39;</span> <span class="c1"># for testing the Development configuration</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">caqe</span> <span class="k">import</span> <span class="n">db</span>
<span class="go">DEV</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">drop_all</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">caqe</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">caqe.settings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">caqe</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">caqe</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">insert_tests_and_conditions</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="section" id="configuration-source">
<h2>Configuration Source<a class="headerlink" href="#configuration-source" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">A pairwise (e.g. A is better than B configuration for evaluating output quality of audio source</span>
<span class="sd">separation algorithms on 4 different quality scales:</span>

<span class="sd">#. Preservation of the Target Sound</span>
<span class="sd">#. Suppression of Other Sounds</span>
<span class="sd">#. Absence of Additional Artificial Noise</span>
<span class="sd">#. Lack of Distortions to the Target Sound</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">url_for</span>

<span class="kn">import</span> <span class="nn">caqe.test_configurations.general_pairwise</span>
<span class="kn">from</span> <span class="nn">caqe.test_configurations.general_pairwise</span> <span class="k">import</span> <span class="n">SERVER_NAME</span>

<span class="c1"># CONFIGURATION contains all of the configurable values for the test. For each condition</span>
<span class="n">CONFIGURATION</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">caqe</span><span class="o">.</span><span class="n">test_configurations</span><span class="o">.</span><span class="n">general_pairwise</span><span class="o">.</span><span class="n">CONFIGURATION</span><span class="p">)</span>
<span class="n">CONFIGURATION</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">CONFIGURATION</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span>
    <span class="c1"># ---------------------------------------------------------------------------------------------</span>
    <span class="c1"># MECHANICAL TURK VARIABLES</span>
    <span class="c1"># Description of MTurk HIT</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;This listening test aims to rate the quality of a set of signals produced by &#39;</span>
                   <span class="s1">&#39;source separation systems. Source separation aims to extract the signal of a &#39;</span>
                   <span class="s1">&#39;target source from a mixture of several sound sources. The resulting signals may&#39;</span>
                   <span class="s1">&#39; include several types of degradations compared to the clean target source, &#39;</span>
                   <span class="s1">&#39;including distortions of the target source, remaining sounds from other sources &#39;</span>
                   <span class="s1">&#39;and additional artificial noise. Note that while the maximum number assignments &#39;</span>
                   <span class="s1">&#39;a worker can do is 2, it</span><span class="se">\&#39;</span><span class="s1">s possible that fewer than 2 may be available to you. &#39;</span>
                   <span class="s1">&#39;**CHROME ONLY** **BONUS AVAILABLE**&#39;</span><span class="p">,</span>

    <span class="c1"># ---------------------------------------------------------------------------------------------</span>
    <span class="c1"># FRONT-END VARIABLES</span>
    <span class="c1"># The reference stimuli in the MUSHRA task</span>
    <span class="s1">&#39;references&#39;</span><span class="p">:</span> <span class="p">((</span><span class="s1">&#39;Target&#39;</span><span class="p">,</span> <span class="s1">&#39;The target source which we are trying to isolate.&#39;</span><span class="p">),</span>
                   <span class="p">(</span><span class="s1">&#39;Mixture&#39;</span><span class="p">,</span> <span class="s1">&#39;The mixture containing the target source and other sources.&#39;</span><span class="p">)),</span>

    <span class="c1"># The HTML content of the preview page. This will be the same for all conditions, regardless of test since</span>
    <span class="c1"># conditions are assigned on the fly (so we can have complete control over condition assignment).</span>
    <span class="s1">&#39;preview_html&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        &lt;p&gt;A sound separation system aims to extract a clean recording of a single target sound</span>
<span class="s2">        (e.g. the vocalist) from a recording containing a mixture of several sounds</span>
<span class="s2">        (e.g. the rest of the band). This listening test aims to rate the quality of</span>
<span class="s2">        recordings produced by different sound separation systems. Due to imperfections of each</span>
<span class="s2">        sound separation system, the output recording (e.g. vocals extracted from the</span>
<span class="s2">        mixture) may include several types of degradations compared to the clean target</span>
<span class="s2">        sound&amp;mdash;it might be a little distorted, you still might be able to hear the background</span>
<span class="s2">        (a little or a lot), it might have strange artifacts.&lt;/p&gt;</span>

<span class="s2">        &lt;p&gt;During the test, you will be asked to assess the quality of the audio. The test will have three</span>
<span class="s2">        parts: 1) a short hearing test phase, 2) a training phase and 3) an evaluation</span>
<span class="s2">        phase. During the training phase, you will be trained on example ratings of quality.</span>
<span class="s2">        During the evaluation phase, you will listen to several of pairs of recordings and</span>
<span class="s2">        choose which recording in each pair has higher quality.&lt;/p&gt;</span>

<span class="s2">        &lt;p&gt;&lt;b&gt;You may receive up to a $0.25 bonus based on the consistency of your ratings.&lt;/b&gt;&lt;/p&gt;</span>

<span class="s2">        &lt;p&gt;The expected total duration of the test is 5-7 minutes.&lt;/p&gt;</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">,</span>

    <span class="c1"># ---------------------------------------------------------------------------------------------</span>
    <span class="c1"># DEFAULT CONDITION AND TEST-SPECIFIC VARIABLES</span>
    <span class="c1">#   (These will be configured for each condition and saved in the database)</span>
    <span class="c1"># The HTML content of the introduction page the first time they do a task</span>
    <span class="s1">&#39;first_task_introduction_html&#39;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p&gt;A sound separation system aims to extract a clean recording of a single target sound</span>
<span class="sd">        (e.g. the vocalist) from a recording containing a mixture of several sounds</span>
<span class="sd">        (e.g. the rest of the band). This listening test aims to rate the quality of</span>
<span class="sd">        recordings produced by different sound separation systems. Due to imperfections of each</span>
<span class="sd">        sound separation system, the output recording (e.g. vocals extracted from the</span>
<span class="sd">        mixture) may include several types of degradations compared to the clean target</span>
<span class="sd">        sound&amp;mdash;it might be a little distorted, you still might be able to hear the background</span>
<span class="sd">        (a little or a lot), it might have strange artifacts.&lt;/p&gt;</span>

<span class="sd">        &lt;p&gt;During the test, you will be asked to assess the &lt;quality&gt;. The test will have three</span>
<span class="sd">        parts: 1) a short hearing test phase, 2) a training phase and 3) an evaluation</span>
<span class="sd">        phase. During the training phase, you will be trained on example ratings of quality.</span>
<span class="sd">        During the evaluation phase, you will listen to several of pairs of recordings and</span>
<span class="sd">        choose which recording in each pair has higher &lt;quality&gt;. Lastly, at the end, there</span>
<span class="sd">        will be a short survey which you will only have to fill out for the first HIT you</span>
<span class="sd">        complete.&lt;/p&gt;</span>

<span class="sd">        &lt;p&gt;&lt;b&gt;You may receive up to a $0.25 bonus based on the consistency of your ratings.&lt;/b&gt;&lt;/p&gt;</span>

<span class="sd">        &lt;p&gt;Including the survey at the end, the expected total duration of the first HIT is 8-10</span>
<span class="sd">        minutes. Because this first HIT takes longer than the rest of the HITs in this group,</span>
<span class="sd">        you will be given an additional $0.30 bonus on top of your consistency bonus.&lt;/p&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span>

    <span class="c1"># The HTML content of the introduction page (after the first time they perform the task)</span>
    <span class="s1">&#39;introduction_html&#39;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;p&gt;A sound separation system aims to extract a clean recording of a single target sound</span>
<span class="sd">        (e.g. the vocalist) from a recording containing a mixture of several sounds</span>
<span class="sd">        (e.g. the rest of the band). This listening test aims to rate the quality of</span>
<span class="sd">        recordings produced by different sound separation systems. Due to imperfections of each</span>
<span class="sd">        sound separation system, the output recording (e.g. vocals extracted from the</span>
<span class="sd">        mixture) may include several types of degradations compared to the clean target</span>
<span class="sd">        sound&amp;mdash;it might be a little distorted, you still might be able to hear the background</span>
<span class="sd">        (a little or a lot), it might have strange artifacts.&lt;/p&gt;</span>

<span class="sd">        &lt;p&gt;During the test, you will be asked to assess the &lt;quality&gt;. The test will have three</span>
<span class="sd">        parts: 1) a short hearing test phase, 2) a training phase and 3) an evaluation</span>
<span class="sd">        phase. During the training phase, you will be trained on example ratings of quality.</span>
<span class="sd">        During the evaluation phase, you will listen to several of pairs of recordings and</span>
<span class="sd">        choose which recording in each pair has higher &lt;quality&gt;.&lt;/p&gt;</span>

<span class="sd">        &lt;p&gt;&lt;b&gt;You may receive up to a $0.25 bonus based on the consistency of your ratings.&lt;/b&gt;&lt;/p&gt;</span>

<span class="sd">        &lt;p&gt;The expected total duration of the test is 5-7 minutes.&lt;/p&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span>
<span class="p">})</span>


<span class="c1"># Configure and insert conditions</span>
<span class="k">def</span> <span class="nf">insert_tests_and_conditions</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is where you configure and define the listening test. If you need to change HTML content based on</span>
<span class="sd">    the testing condition, you configure it here as well, overriding the default values in `CONFIGURATION`.</span>
<span class="sd">    Running this doctest initializes the development database.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    None</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    To call this you need the application context, e.g.:</span>

<span class="sd">    &gt;&gt;&gt; import os</span>
<span class="sd">    &gt;&gt;&gt; os.environ[&#39;FLASK_CONF&#39;] = &#39;DEV&#39; # for testing the Development configuration</span>
<span class="sd">    &gt;&gt;&gt; from caqe import db</span>
<span class="sd">    DEV</span>
<span class="sd">    &gt;&gt;&gt; db.drop_all()</span>
<span class="sd">    &gt;&gt;&gt; db.create_all()</span>
<span class="sd">    &gt;&gt;&gt; import caqe</span>
<span class="sd">    &gt;&gt;&gt; import caqe.settings</span>
<span class="sd">    &gt;&gt;&gt; with caqe.app.app_context():</span>
<span class="sd">    ...     caqe.settings.insert_tests_and_conditions()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">json</span>
    <span class="kn">import</span> <span class="nn">caqe.models</span> <span class="k">as</span> <span class="nn">models</span>
    <span class="kn">from</span> <span class="nn">caqe</span> <span class="k">import</span> <span class="n">db</span>

    <span class="n">num_audio_files</span> <span class="o">=</span> <span class="mi">10</span>

    <span class="c1"># The quality scales</span>
    <span class="n">qualities</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&lt;b&gt;overall quality&lt;/b&gt; compared to the target sound for each recording&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;quality in terms of &lt;b&gt;preservation of the target sound&lt;/b&gt; in each recording&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;quality in terms of &lt;b&gt;suppression of other sounds&lt;/b&gt; in each recording&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;quality in terms of &lt;b&gt;absence of additional artificial noise&lt;/b&gt; in each recording&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;quality in terms of &lt;b&gt;lack of distortions to the target sound&lt;/b&gt; in each recording&#39;</span><span class="p">]</span>

    <span class="c1"># Descriptions of the quality scales</span>
    <span class="n">quality_explanations</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&lt;b&gt;Overall quality&lt;/b&gt; refers to overall quality of the output of the sound separation &#39;</span>
                            <span class="s1">&#39;system, i.e. how well the target sound (e.g. a single voice) has been separated from the &#39;</span>
                            <span class="s1">&#39;mixture (e.g. a choir). Recordings should be rated based on how similar they are to the &#39;</span>
                            <span class="s1">&#39;target sound (e.g. the sound of a solo voice). For example, if a recording is very similar&#39;</span>
                            <span class="s1">&#39; to the the target sound, it should be given a high rating. However, if a recording is &#39;</span>
                            <span class="s1">&#39;very different from the target sound (e.g. because of degradation or additional sounds), &#39;</span>
                            <span class="s1">&#39;it should be given a low rating.&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;&lt;b&gt;Preservation of the target sound&lt;/b&gt; refers to how well the target sound (e.g. the &#39;</span>
                            <span class="s1">&#39;voice we</span><span class="se">\&#39;</span><span class="s1">re interested in isolating) has been preserved in the sound separation process. &#39;</span>
                            <span class="s1">&#39;For example, if the target sound is intact (but additional sounds possibly exist in the &#39;</span>
                            <span class="s1">&#39;recording), the recording should be given a high rating. However, if a recording is &#39;</span>
                            <span class="s1">&#39;missing parts of the target sound, it should be given a low rating.&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;&lt;b&gt;Suppression of other sound&lt;/b&gt; refers to how well non-target sounds from the mixture &#39;</span>
                            <span class="s1">&#39;recording have been suppressed in the sound separation process. For example, if you cannot&#39;</span>
                            <span class="s1">&#39; hear any of the non-target sounds from mixture in the recording, it should be given a &#39;</span>
                            <span class="s1">&#39;high rating (regardless of whether the target sound is well-preserved or not). However, &#39;</span>
                            <span class="s1">&#39;if many of the non-target sounds from the mixture are still in present in the recording, &#39;</span>
                            <span class="s1">&#39;it should be given a low rating.&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;&lt;b&gt;Absence of additional artificial noise&lt;/b&gt; refers to the presence/absence of additional&#39;</span>
                            <span class="s1">&#39; artificial noise that may have been introduced in the sound separation process. For &#39;</span>
                            <span class="s1">&#39;example, if a recording only contains sounds from the original mixture recording, it &#39;</span>
                            <span class="s1">&#39;should be given a high rating regardless of whether the target or non-target sounds are &#39;</span>
                            <span class="s1">&#39;completely intact. However, if the recording contains a lot of sounds (e.g. bleeps, &#39;</span>
                            <span class="s1">&#39;rumbles, pops) that are not in the original mixture, then the recording should be given a&#39;</span>
                            <span class="s1">&#39; low rating.&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;&lt;b&gt;Lack of distortions to the target sound&lt;/b&gt; refers to the amount of distortions to the&#39;</span>
                            <span class="s1">&#39; target sound that may have been introduced in the sound separation process. For example,&#39;</span>
                            <span class="s1">&#39; if the target sound is not distorted (regardless if other sounds from the mixture &#39;</span>
                            <span class="s1">&#39;recording are present), the recording should be given a high rating. However, if you &#39;</span>
                            <span class="s1">&#39;perceive the target sound as distorted in any way, it should be given a lower rating.&#39;</span><span class="p">]</span>

    <span class="c1"># ---------------------------------------------------------------------------------------------</span>
    <span class="c1"># TRAINING EXAMPLES FOR PARTICIPANTS</span>
    <span class="c1"># These are the reference examples for the training examples</span>
    <span class="c1"># List entries must be dicts composed as {&lt;reference_name&gt;: &lt;example_url&gt;, ...}</span>
    <span class="n">reference_example_dict</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;Target&#39;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_target.wav&#39;</span><span class="p">),</span>
                               <span class="s1">&#39;Mixture&#39;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorInterf.wav&#39;</span><span class="p">)},</span>
                              <span class="p">{</span><span class="s1">&#39;Target&#39;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_target.wav&#39;</span><span class="p">),</span>
                               <span class="s1">&#39;Mixture&#39;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorInterf.wav&#39;</span><span class="p">)},</span>
                              <span class="p">{</span><span class="s1">&#39;Target&#39;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_target.wav&#39;</span><span class="p">),</span>
                               <span class="s1">&#39;Mixture&#39;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorInterf.wav&#39;</span><span class="p">)},</span>
                              <span class="p">{</span><span class="s1">&#39;Target&#39;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_target.wav&#39;</span><span class="p">),</span>
                               <span class="s1">&#39;Mixture&#39;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorInterf.wav&#39;</span><span class="p">)},</span>
                              <span class="p">{</span><span class="s1">&#39;Target&#39;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_target.wav&#39;</span><span class="p">),</span>
                               <span class="s1">&#39;Mixture&#39;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorInterf.wav&#39;</span><span class="p">)}]</span>

    <span class="c1">#</span>
    <span class="n">quality_example_dicts</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;Low&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorInterf.wav&#39;</span><span class="p">),</span>
                                      <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorArtif.wav&#39;</span><span class="p">),</span>
                                      <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorDistTarget.wav&#39;</span><span class="p">)],</span>
                              <span class="s1">&#39;High&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_target.wav&#39;</span><span class="p">),</span> <span class="p">]},</span>
                             <span class="p">{</span><span class="s1">&#39;Low&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorDistTarget.wav&#39;</span><span class="p">)],</span>
                              <span class="s1">&#39;High&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorInterf.wav&#39;</span><span class="p">),</span>
                                       <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorArtif.wav&#39;</span><span class="p">),</span>
                                       <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_target.wav&#39;</span><span class="p">)]},</span>
                             <span class="p">{</span><span class="s1">&#39;Low&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorInterf.wav&#39;</span><span class="p">),</span> <span class="p">],</span>
                              <span class="s1">&#39;High&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorArtif.wav&#39;</span><span class="p">),</span>
                                       <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorDistTarget.wav&#39;</span><span class="p">),</span>
                                       <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_target.wav&#39;</span><span class="p">)]},</span>
                             <span class="p">{</span><span class="s1">&#39;Low&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorArtif.wav&#39;</span><span class="p">),</span> <span class="p">],</span>
                              <span class="s1">&#39;High&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorInterf.wav&#39;</span><span class="p">),</span>
                                       <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorDistTarget.wav&#39;</span><span class="p">),</span>
                                       <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_target.wav&#39;</span><span class="p">)]},</span>
                             <span class="p">{</span><span class="s1">&#39;Low&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorArtif.wav&#39;</span><span class="p">),</span>
                                      <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorDistTarget.wav&#39;</span><span class="p">)],</span>
                              <span class="s1">&#39;High&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_anchorInterf.wav&#39;</span><span class="p">),</span>
                                       <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;audio/exp00_target.wav&#39;</span><span class="p">)]}]</span>

    <span class="k">for</span> <span class="n">quality</span><span class="p">,</span> <span class="n">quality_explanation</span><span class="p">,</span> <span class="n">reference_example_dict</span><span class="p">,</span> <span class="n">quality_example_dict</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">qualities</span><span class="p">,</span>
                                                                                          <span class="n">quality_explanations</span><span class="p">,</span>
                                                                                          <span class="n">reference_example_dict</span><span class="p">,</span>
                                                                                          <span class="n">quality_example_dicts</span><span class="p">,</span> <span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">CONFIGURATION</span><span class="p">)</span>
        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;reference_example_dict&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reference_example_dict</span>
        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;quality_example_dict&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">quality_example_dict</span>

        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;test_title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;test_title&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;quality&gt;&#39;</span><span class="p">,</span> <span class="n">quality</span><span class="p">)</span>

        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;introduction_html&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;introduction_html&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;quality&gt;&#39;</span><span class="p">,</span> <span class="n">quality</span><span class="p">)</span>
        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;introduction_html&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;introduction_html&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;quality_explanation&gt;&#39;</span><span class="p">,</span> <span class="n">quality_explanation</span><span class="p">)</span>

        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;first_task_introduction_html&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;first_task_introduction_html&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;quality&gt;&#39;</span><span class="p">,</span> <span class="n">quality</span><span class="p">)</span>
        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;first_task_introduction_html&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;first_task_introduction_html&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;quality_explanation&gt;&#39;</span><span class="p">,</span>
                                                                                                <span class="n">quality_explanation</span><span class="p">)</span>

        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;training_instructions_html&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;training_instructions_html&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;quality&gt;&#39;</span><span class="p">,</span>
                                                                                            <span class="n">quality</span><span class="p">)</span>
        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;training_instructions_html&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;training_instructions_html&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;quality_explanation&gt;&#39;</span><span class="p">,</span>
                                                                                            <span class="n">quality_explanation</span><span class="p">)</span>

        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;evaluation_instructions_html&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;evaluation_instructions_html&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;quality&gt;&#39;</span><span class="p">,</span>
                                                                                                <span class="n">quality</span><span class="p">)</span>
        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;evaluation_instructions_html&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;evaluation_instructions_html&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;quality_explanation&gt;&#39;</span><span class="p">,</span>
                                                                                                <span class="n">quality_explanation</span><span class="p">)</span>

        <span class="n">test</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Test</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">config</span><span class="p">))</span>

        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>

    <span class="c1"># save all tests</span>
    <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">test</span> <span class="ow">in</span> <span class="n">models</span><span class="o">.</span><span class="n">Test</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_audio_files</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="c1"># THE AUDIO STIMULUS FILES</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;reference_files&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;Target&#39;</span><span class="p">,</span> <span class="s1">&#39;exp</span><span class="si">%02d</span><span class="s1">_target.wav&#39;</span> <span class="o">%</span> <span class="n">j</span><span class="p">),</span>
                                                   <span class="p">(</span><span class="s1">&#39;Mixture&#39;</span><span class="p">,</span> <span class="s1">&#39;exp</span><span class="si">%02d</span><span class="s1">_anchorInterf.wav&#39;</span> <span class="o">%</span> <span class="n">j</span><span class="p">)],</span>
                               <span class="s1">&#39;stimulus_files&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;S1&#39;</span><span class="p">,</span> <span class="s1">&#39;exp</span><span class="si">%02d</span><span class="s1">_target.wav&#39;</span> <span class="o">%</span> <span class="n">j</span><span class="p">),</span>
                                                  <span class="p">(</span><span class="s1">&#39;S2&#39;</span><span class="p">,</span> <span class="s1">&#39;exp</span><span class="si">%02d</span><span class="s1">_anchorInterf.wav&#39;</span> <span class="o">%</span> <span class="n">j</span><span class="p">),</span>
                                                  <span class="p">(</span><span class="s1">&#39;S3&#39;</span><span class="p">,</span> <span class="s1">&#39;exp</span><span class="si">%02d</span><span class="s1">_anchorArtif.wav&#39;</span> <span class="o">%</span> <span class="n">j</span><span class="p">),</span>
                                                  <span class="p">(</span><span class="s1">&#39;S4&#39;</span><span class="p">,</span> <span class="s1">&#39;exp</span><span class="si">%02d</span><span class="s1">_anchorDistTarget.wav&#39;</span> <span class="o">%</span> <span class="n">j</span><span class="p">),</span>
                                                  <span class="p">(</span><span class="s1">&#39;S5&#39;</span><span class="p">,</span> <span class="s1">&#39;exp</span><span class="si">%02d</span><span class="s1">_test5.wav&#39;</span> <span class="o">%</span> <span class="n">j</span><span class="p">),</span>
                                                  <span class="p">(</span><span class="s1">&#39;S6&#39;</span><span class="p">,</span> <span class="s1">&#39;exp</span><span class="si">%02d</span><span class="s1">_test6.wav&#39;</span> <span class="o">%</span> <span class="n">j</span><span class="p">),</span>
                                                  <span class="p">(</span><span class="s1">&#39;S7&#39;</span><span class="p">,</span> <span class="s1">&#39;exp</span><span class="si">%02d</span><span class="s1">_test7.wav&#39;</span> <span class="o">%</span> <span class="n">j</span><span class="p">),</span>
                                                  <span class="p">(</span><span class="s1">&#39;S8&#39;</span><span class="p">,</span> <span class="s1">&#39;exp</span><span class="si">%02d</span><span class="s1">_test8.wav&#39;</span> <span class="o">%</span> <span class="n">j</span><span class="p">)]})</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Condition</span><span class="p">(</span><span class="n">test_id</span><span class="o">=</span><span class="n">test</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="caqe.html" class="btn btn-neutral float-right" title="caqe package" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="caqe.test_configurations.sourceseparation_mushra.html" class="btn btn-neutral" title="caqe.test_configurations.sourceseparation_mushra module" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Mark Cartwright.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1a1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>